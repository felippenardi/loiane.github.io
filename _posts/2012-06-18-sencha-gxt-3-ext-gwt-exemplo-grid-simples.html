---
layout: post
title: 'Sencha GXT 3 (Ext GWT): Exemplo Grid Simples'
date: 2012-06-18 04:30:32.000000000 -03:00
type: post
published: true
status: publish
categories:
- Ext GWT 3 - GXT 3
tags:
- Ext GWT 3
- grid
- Sencha GXT 3
language: pt-br
tag: pt-br
---
<p>No post de hoje vamos aprender passo a passo como implementar um Grid simples usando Sencha GXT 3, também conhecido como Ext GWT 3.</p>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Eclipse</li>
<li>Google plugin para Eclipse</li>
<li>Sencha GXT 3</li>
</ul>
<p>Se você não souber como configurar o ambiente, <a title="Començando com Ext GWT 3 / GXT 3: Hello World" href="http://www.loiane.com/2012/05/comencando-com-ext-gwt-3-gxt-3-hello-world/" target="_blank" rel="noopener">pode ler esse tutorial que mostra o passo a passo de como fazer isso</a>.</p>
<p><strong>Passo a passo</strong>:</p>
<ul>
<li>Criar o Projeto</li>
<li>Criar o código GXT 3</li>
<li>Criar a classe Entry Point (public static void main do GWT)</li>
<li>Executar o projeto</li>
</ul>
<div>Segue screenshot do projeto do exemplo que vamos implementar nesse post:</div>
<div><a href="http://www.loiane.com/wp-content/uploads/2012/06/sencha-gxt3-ext-gwt-loiane-simple-grid.png"><img class="aligncenter size-full wp-image-4737" title="sencha-gxt3-ext-gwt-loiane-simple-grid" alt="" src="{{ site.baseurl }}/assets/images/assets/sencha-gxt3-ext-gwt-loiane-simple-grid.png" width="559" height="259" /></a></div>
<h1>1- Criando o Projeto</h1>
<p>A primeira coisa que precisamos é criar o projeto e adicionar o jar do GXT 3. Segue o passo a passo:</p>
<p>1.1 - Para criar um novo projeto, clique na “seta para baixo” ao lado do ícone do Google e selecione “<em><strong>New Web Application Project</strong></em>”:</p>
<p><a href="http://www.loiane.com/wp-content/uploads/2012/06/ext-gwt-gxt-simple-grid-loiane-01.png"><img class="aligncenter size-full wp-image-4730" title="ext-gwt-gxt-simple-grid-loiane-01" alt="" src="{{ site.baseurl }}/assets/images/assets/ext-gwt-gxt-simple-grid-loiane-01.png" width="289" height="222" /></a></p>
<p>1.2 - Dê um nome para o projeto (neste tutorial dei o nome de <em><strong>sencha-gxt3-simple-grid</strong></em>), informe o nome do pacote base que irá usar (neste caso escolhi <em><strong>com.loiane.gxt3</strong></em>). Depois deixe apenas a opção “Use Google Web Toolkit” selecionada. Assim vamos criar um projeto “zerado”:</p>
<p><a href="http://www.loiane.com/wp-content/uploads/2012/06/ext-gwt-gxt-simple-grid-loiane-02.png"><img class="aligncenter size-full wp-image-4731" title="ext-gwt-gxt-simple-grid-loiane-02" alt="" src="{{ site.baseurl }}/assets/images/assets/ext-gwt-gxt-simple-grid-loiane-02.png" width="523" height="697" /></a></p>
<p>1.3 - Depois adicione a biblioteca do GXT 3 no projeto. <a title="Començando com Ext GWT 3 / GXT 3: Hello World" href="http://www.loiane.com/2012/05/comencando-com-ext-gwt-3-gxt-3-hello-world/" target="_blank" rel="noopener">Este post mostra como fazer isso</a>.</p>
<h1>2 - Criando o Grid com Sencha GXT 3</h1>
<p>2.1 - Agora que o projeto já está todo configurado, vamos começar com a diversão e implementar a nossa aplicação com <a href="http://www.sencha.com/products/extgwt/" target="_blank" rel="noopener">GXT</a> 3. Para isso, selecione o projeto, clique com o botão direto e escolha “<em>New</em>” -&gt; “<em>Other</em>”. Ache o folder do “<em>Google Web Toolkit</em>” e escolha “<em>Module</em>”:</p>
<p><a href="http://www.loiane.com/wp-content/uploads/2012/06/ext-gwt-gxt-simple-grid-loiane-03.png"><img class="aligncenter size-full wp-image-4743" title="ext-gwt-gxt-simple-grid-loiane-03" alt="" src="{{ site.baseurl }}/assets/images/assets/ext-gwt-gxt-simple-grid-loiane-03.png" width="522" height="496" /></a></p>
<p>2.2 - Escolha o pacote (que escolhemos quando criamos o projeto, lembra?) e dê um nome para o módulo. Chamei o módulo de <em><strong>SimpleGrid</strong></em>. Outro detalhe é que se reparamos na parte de Inherited modules, apenas o <em><strong>com.google.gwt.user.User</strong></em> vem por padrão. Como vamos desenvolver uma aplicação com GXT, também precisamos adicionar o módulo da Sencha, que o o <em><strong>com.sencha.gxt.ui.GXT</strong></em>. Para isso, basta clicar no botão "<em>Add</em>" e procurar por essa classe. Depois de tudo pronto, basta clicar no botão "<em>Finish</em>":</p>
<p><a href="http://www.loiane.com/wp-content/uploads/2012/06/ext-gwt-gxt-simple-grid-loiane-04.png"><img class="aligncenter size-full wp-image-4744" title="ext-gwt-gxt-simple-grid-loiane-04" alt="" src="{{ site.baseurl }}/assets/images/assets/ext-gwt-gxt-simple-grid-loiane-04.png" width="528" height="386" /></a></p>
<p>Repare que o plugin do Google irá gerar a estrutura de pacotes (nesse caso <em><strong>com.loiane.gxt3.client</strong></em>) e um arquivo xml com a configuração do módulo que acabamos de criar.</p>
<p>2.3 - Agora podemos começar a codificar! O Primeiro passo é criar um POJO que represente o dado que queremos mostrar no Grid. Nesse exemplo vamos criar uma classe simples que representa um contato. Vou colocar essa classe dentro do pacote <em><strong>com.loiane.gxt3.client.model </strong></em>e essa classe também <em>precisa</em> implementar a interface <em><strong>Serializable</strong></em>:</p>
<p><a href="http://www.loiane.com/wp-content/uploads/2012/06/ext-gwt-gxt-simple-grid-loiane-05.png"><img class="aligncenter size-full wp-image-4745" title="ext-gwt-gxt-simple-grid-loiane-05" alt="" src="{{ site.baseurl }}/assets/images/assets/ext-gwt-gxt-simple-grid-loiane-05.png" width="533" height="641" /></a></p>
<p>2.4 - Depois que a classe está criada, vamos adicionar os atributos, métodos getters e setter e dois construtores: um vazio e um que recebe todos os atributos:</p>
<p>[code lang="java" firstline="1" toolbar="true" collapse="false" wraplines="false"]<br />
package com.loiane.gxt3.client.model;</p>
<p>import java.io.Serializable;</p>
<p>public class Contact implements Serializable {</p>
<p>	private static final long serialVersionUID = 1L;</p>
<p>	private Integer id;<br />
	private String name;<br />
	private String phone;<br />
	private String email;</p>
<p>	public Contact(){<br />
		super();<br />
	}</p>
<p>	public Contact(Integer id, String name, String phone, String email) {<br />
		super();<br />
		this.id = id;<br />
		this.name = name;<br />
		this.phone = phone;<br />
		this.email = email;<br />
	}</p>
<p>	public Integer getId() {<br />
		return id;<br />
	}<br />
	public void setId(Integer id) {<br />
		this.id = id;<br />
	}<br />
	public String getName() {<br />
		return name;<br />
	}<br />
	public void setName(String name) {<br />
		this.name = name;<br />
	}<br />
	public String getPhone() {<br />
		return phone;<br />
	}<br />
	public void setPhone(String phone) {<br />
		this.phone = phone;<br />
	}<br />
	public String getEmail() {<br />
		return email;<br />
	}<br />
	public void setEmail(String email) {<br />
		this.email = email;<br />
	}<br />
}<br />
[/code]</p>
<p>2.5 - Para o grid, vamos precisar configurar as colunas que vão aparecer no grid. As colunas irão mostrar os dados que representam os atributos que acabamos de criar na classe Contact. E para configurarmos as colunas do grid, o GXT 3 precisa de uma classe Properties, que nós vamos criar agora:</p>
<p><a href="http://www.loiane.com/wp-content/uploads/2012/06/ext-gwt-gxt-simple-grid-loiane-06.png"><img class="aligncenter size-full wp-image-4746" title="ext-gwt-gxt-simple-grid-loiane-06" alt="" src="{{ site.baseurl }}/assets/images/assets/ext-gwt-gxt-simple-grid-loiane-06.png" width="546" height="500" /></a></p>
<p>2.6 - A classe ContactProperties vai ficar assim:</p>
<p>[code lang="java" firstline="1" toolbar="true" collapse="false" wraplines="false"]<br />
package com.loiane.gxt3.client.model;</p>
<p>import com.google.gwt.editor.client.Editor.Path;<br />
import com.sencha.gxt.core.client.ValueProvider;<br />
import com.sencha.gxt.data.shared.ModelKeyProvider;<br />
import com.sencha.gxt.data.shared.PropertyAccess;</p>
<p>public interface ContactProperties extends PropertyAccess&lt;Contact&gt; {</p>
<p>	@Path(&quot;id&quot;)<br />
	ModelKeyProvider&lt;Contact&gt; key();</p>
<p>	ValueProvider&lt;Contact, String&gt; name();</p>
<p>	ValueProvider&lt;Contact, String&gt; phone();</p>
<p>	ValueProvider&lt;Contact, String&gt; email();<br />
}<br />
[/code]</p>
<p>E a pergunta que não quer calar: O que é essa tal interface <em><strong>PropertyAccess</strong></em>? Essa interface serve para que o grid consiga acessar os atributos da classe POJO que criamos.  Precisamos criar um método para acessar cada atributo que criamos na nossa classe <em><strong>Contact</strong></em>. Esse métodos podem retornar um <em><strong>ModelKeyProvider</strong></em> ou <em><strong>ValueProvider</strong></em> (no nosso caso). O <em><strong>ModelKeyProvider </strong></em>significa que tem um retorno único, como por exemplo, o id do registro que vai ser retornado do banco de dados; neste caso ainda usamos a anotação Path para dizer que esse método serve para acessar o atributo <em><strong>id</strong></em> da classe <em><strong>Contact</strong></em>. Os outros métodos são do tipo <em><strong>ValueProvider</strong></em>, o que significa que vamos acessar diretamente o valor dos outros atributos, que queremos mostrar no grid.</p>
<p>2.7 - Agora já temos tudo pronto para criar o código do Grid em GXT 3. Vamos criar uma nova classe que extende da classe Grid do GXT 3:</p>
<p><a href="http://www.loiane.com/wp-content/uploads/2012/06/ext-gwt-gxt-simple-grid-loiane-07.png"><img class="aligncenter size-full wp-image-4749" title="ext-gwt-gxt-simple-grid-loiane-07" alt="" src="{{ site.baseurl }}/assets/images/assets/ext-gwt-gxt-simple-grid-loiane-07.png" width="531" height="637" /></a></p>
<p>2.8 - Bem, para implementarmos um Grid simples simples, precisamos de apenas 2 coisas: da configuração de colunas (afinal, precisamos dizer quais são as colunas que irão aparecer no grid né?), e uma store, que é responsável por popular o grid com dados.</p>
<p>Primeiro vamos então criar a configuração das colunas:</p>
<p>[code lang="java" firstline="1" toolbar="true" collapse="false" wraplines="false"]<br />
private static final ContactProperties props = GWT.create(ContactProperties.class);</p>
<p>private static ColumnConfig&lt;Contact, String&gt; nameCol = new ColumnConfig&lt;Contact, String&gt;(props.name(), 150, &quot;Name&quot;);<br />
private static ColumnConfig&lt;Contact, String&gt; phoneCol = new ColumnConfig&lt;Contact, String&gt;(props.phone(), 75, &quot;Phone&quot;);<br />
private static ColumnConfig&lt;Contact, String&gt; emailCol = new ColumnConfig&lt;Contact, String&gt;(props.email(), 150, &quot;Email&quot;);</p>
<p>private static ColumnModel&lt;Contact&gt; createColumnModel(){</p>
<p>	List&lt;ColumnConfig&lt;Contact, ?&gt;&gt; columnConfigList = new ArrayList&lt;ColumnConfig&lt;Contact, ?&gt;&gt;();<br />
	columnConfigList.add(nameCol);<br />
	columnConfigList.add(phoneCol);<br />
	columnConfigList.add(emailCol);</p>
<p>	return new ColumnModel&lt;Contact&gt;(columnConfigList);<br />
}<br />
[/code]</p>
<p>Na linha 1 temos a instância da classe <em><strong>ContactProperties</strong></em> que criamos no passo anterior. Logo abaixo temos mais 3 atributos que representam a configuração de 3 colunas. E logo depois temos um método que retorna um objeto do tipo <em><strong>ColumnModel</strong></em> que vamos setar no grid daqui a pouco. Para quem já tem experiência com ExtJS, pode notar que é praticamente a mesma coisa, só que agora estamos codificando em java ao invés de codificar com javascript. E para quem nunca trabalhou com ExtJS, sugiro que estude esses conceitos do ExtJS.</p>
<p>Agora precisamos criar a Store:</p>
<p>[code lang="java" firstline="1" toolbar="true" collapse="false" wraplines="false"]<br />
private static ListStore&lt;Contact&gt; generateData(){</p>
<p>	ListStore&lt;Contact&gt; store = new ListStore&lt;Contact&gt;(props.key());<br />
	store.addAll(ContactTestData.generateData());</p>
<p>	return store;<br />
}<br />
[/code]</p>
<p>Como nesse primeiro exemplo criei apenas alguns dados manualmente para popular a store, criei essa classe ContactTestData. Em um próximo post veremos como buscar esses dados diretamente de um banco de dados:</p>
<p>[code lang="java" firstline="1" toolbar="true" collapse="false" wraplines="false"]<br />
package com.loiane.gxt3.client.util;</p>
<p>import java.util.ArrayList;<br />
import java.util.List;</p>
<p>import com.loiane.gxt3.client.model.Contact;</p>
<p>public class ContactTestData {</p>
<p>	public static List&lt;Contact&gt; generateData(){</p>
<p>		List&lt;Contact&gt; list = new ArrayList&lt;Contact&gt;();</p>
<p>		list.add(new Contact(1, &quot;Loiane&quot;, &quot;1234-5678&quot;, &quot;loiane@email.com&quot;));<br />
		list.add(new Contact(2, &quot;Peter&quot;, &quot;2345-6789&quot;, &quot;peter@email.com&quot;));<br />
		list.add(new Contact(3, &quot;Andrew&quot;, &quot;9876-1234&quot;, &quot;andrew@email.com&quot;));<br />
		list.add(new Contact(4, &quot;Caroline&quot;, &quot;5647-8473&quot;, &quot;caroline@email.com&quot;));<br />
		list.add(new Contact(5, &quot;Jared&quot;, &quot;4034-4585&quot;, &quot;jared@email.com&quot;));<br />
		list.add(new Contact(6, &quot;Linda&quot;, &quot;3455-0234&quot;, &quot;linda@email.com&quot;));<br />
		list.add(new Contact(7, &quot;Elena&quot;, &quot;3454-4543&quot;, &quot;elena@email.com&quot;));<br />
		list.add(new Contact(8, &quot;Stefan&quot;, &quot;5677-5677&quot;, &quot;stefan@email.com&quot;));<br />
		list.add(new Contact(9, &quot;Ana&quot;, &quot;2434-2343&quot;, &quot;ana@email.com&quot;));</p>
<p>		return list;<br />
	}<br />
}<br />
[/code]</p>
<p>Por último, só falta a gente adicionar a store e o columnModel ao grid, e vamos fazer isso através do construtor. Adicionei também umas configuração para deixar o grid mais bonito, mas para criar o grid mesmo só precisamos da instância!</p>
<p>[code lang="java" firstline="1" toolbar="true" collapse="false" wraplines="false"]<br />
public SimpleGrid() {</p>
<p>	super(generateData(), createColumnModel());</p>
<p>	this.getView().setStripeRows(true);<br />
	this.getView().setColumnLines(true);<br />
	this.getView().setAutoExpandColumn(nameCol);<br />
	this.setBorders(false);<br />
	this.setColumnReordering(true);<br />
}<br />
[/code]</p>
<p>A classe SimpleGrid fica assim então:</p>
<p>[code lang="java" firstline="1" toolbar="true" collapse="false" wraplines="false"]<br />
package com.loiane.gxt3.client.grid;</p>
<p>import java.util.ArrayList;<br />
import java.util.List;</p>
<p>import com.google.gwt.core.client.GWT;<br />
import com.loiane.gxt3.client.model.Contact;<br />
import com.loiane.gxt3.client.model.ContactProperties;<br />
import com.loiane.gxt3.client.util.ContactTestData;<br />
import com.sencha.gxt.data.shared.ListStore;<br />
import com.sencha.gxt.widget.core.client.grid.ColumnConfig;<br />
import com.sencha.gxt.widget.core.client.grid.ColumnModel;<br />
import com.sencha.gxt.widget.core.client.grid.Grid;</p>
<p>public class SimpleGrid extends Grid&lt;Contact&gt; {</p>
<p>	private static final ContactProperties props = GWT.create(ContactProperties.class);</p>
<p>	private static ColumnConfig&lt;Contact, String&gt; nameCol = new ColumnConfig&lt;Contact, String&gt;(props.name(), 150, &quot;Name&quot;);<br />
	private static ColumnConfig&lt;Contact, String&gt; phoneCol = new ColumnConfig&lt;Contact, String&gt;(props.phone(), 75, &quot;Phone&quot;);<br />
	private static ColumnConfig&lt;Contact, String&gt; emailCol = new ColumnConfig&lt;Contact, String&gt;(props.email(), 150, &quot;Email&quot;);</p>
<p>	public SimpleGrid() {</p>
<p>		super(generateData(), createColumnModel());</p>
<p>		this.getView().setStripeRows(true);<br />
		this.getView().setColumnLines(true);<br />
		this.getView().setAutoExpandColumn(nameCol);<br />
		this.setBorders(false);<br />
		this.setColumnReordering(true);<br />
	}</p>
<p>	private static ColumnModel&lt;Contact&gt; createColumnModel(){</p>
<p>		List&lt;ColumnConfig&lt;Contact, ?&gt;&gt; columnConfigList = new ArrayList&lt;ColumnConfig&lt;Contact, ?&gt;&gt;();<br />
		columnConfigList.add(nameCol);<br />
		columnConfigList.add(phoneCol);<br />
		columnConfigList.add(emailCol);</p>
<p>		return new ColumnModel&lt;Contact&gt;(columnConfigList);<br />
	}</p>
<p>	private static ListStore&lt;Contact&gt; generateData(){</p>
<p>		ListStore&lt;Contact&gt; store = new ListStore&lt;Contact&gt;(props.key());<br />
		store.addAll(ContactTestData.generateData());</p>
<p>		return store;<br />
	}<br />
}<br />
[/code]</p>
<h1>3 - Criando a Classe EntryPoint</h1>
<p>3.1 - Tudo pronto! Só precisamos criar agora uma maneira de chamar esse código todo que acabamos de criar! Para isso, vamos criar uma classe <em><strong>EntryPoint</strong></em>, que possui um método chamado <em><strong>onModuleLoad</strong></em>, que é uma espécie de método <em><strong>main</strong></em> do GWT:</p>
<p><a href="http://www.loiane.com/wp-content/uploads/2012/06/ext-gwt-gxt-simple-grid-loiane-10.png"><img class="aligncenter size-full wp-image-4751" title="ext-gwt-gxt-simple-grid-loiane-10" alt="" src="{{ site.baseurl }}/assets/images/assets/ext-gwt-gxt-simple-grid-loiane-10.png" width="520" height="497" /></a></p>
<p>3.2 - Vamos criar a classe:</p>
<p><a href="http://www.loiane.com/wp-content/uploads/2012/06/ext-gwt-gxt-simple-grid-loiane-08.png"><img class="aligncenter size-full wp-image-4752" title="ext-gwt-gxt-simple-grid-loiane-08" alt="" src="{{ site.baseurl }}/assets/images/assets/ext-gwt-gxt-simple-grid-loiane-08.png" width="523" height="572" /></a></p>
<p>3.3 - Vamos ao código então:</p>
<p>[code lang="java" firstline="1" toolbar="true" collapse="false" wraplines="false"]<br />
package com.loiane.gxt3.client;</p>
<p>import com.google.gwt.core.client.EntryPoint;<br />
import com.google.gwt.user.client.ui.RootPanel;<br />
import com.loiane.gxt3.client.grid.SimpleGrid;<br />
import com.sencha.gxt.widget.core.client.ContentPanel;<br />
import com.sencha.gxt.widget.core.client.Resizable;<br />
import com.sencha.gxt.widget.core.client.Resizable.Dir;</p>
<p>public class SimpleGridExample implements EntryPoint {</p>
<p>	@Override<br />
	public void onModuleLoad() {</p>
<p>		ContentPanel root = new ContentPanel();</p>
<p>		root.setHeadingText(&quot;Simple Grid&quot;);<br />
	    root.setPixelSize(550, 250);<br />
	    root.addStyleName(&quot;margin-10&quot;);</p>
<p>	    Resizable r = new Resizable(root, Dir.E, Dir.SE, Dir.S);<br />
	    r.setMinHeight(200);<br />
	    r.setMinWidth(300);</p>
<p>	    root.setWidget(new SimpleGrid());</p>
<p>	    RootPanel.get().add(root);<br />
	}</p>
<p>}<br />
[/code]</p>
<p>No código acima apenas criamos um painel que pode ser redimencionado e adicionamos o grid como o único item. O painel será renderizado dentro da tag <em><strong>body</strong></em> do html.</p>
<p>3.4 - Falando em HTML, só falta agora criar a página html dentro da pasta war:</p>
<p>[code lang="html" firstline="1" toolbar="true" collapse="false" wraplines="false"]<br />
&lt;!doctype html&gt;<br />
&lt;html&gt;<br />
  &lt;head&gt;<br />
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;<br />
    &lt;title&gt;Simple Grid Example - loiane.com&lt;/title&gt;</p>
<p>    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;simplegrid/reset.css&quot; /&gt;</p>
<p>    &lt;style type=&quot;text/css&quot;&gt;<br />
	    body {<br />
			padding: 30px;<br />
		}<br />
    &lt;/style&gt;</p>
<p>    &lt;script type=&quot;text/javascript&quot; language=&quot;javascript&quot; src=&quot;simplegrid/simplegrid.nocache.js&quot;&gt;&lt;/script&gt;<br />
  &lt;/head&gt;</p>
<p>  &lt;body&gt;<br />
  &lt;/body&gt;<br />
&lt;/html&gt;<br />
[/code]</p>
<h1>4 - Executando o Projeto</h1>
<p>4.1 - Para executar o projeto, vamos clicar novamente com o botão direito no projeto, e escolher a opção “Run As” -&gt; “Web Application” (repare no ícone do plugin do Google)!</p>
<h1>5 - Download Código Fonte</h1>
<p>Para fazer download do código fonte completo (ou fazer um fork) do repositório do github: <a href="https://github.com/loiane/sencha-gxt3-simple-grid" target="_blank" rel="noopener">https://github.com/loiane/sencha-gxt3-simple-grid</a></p>
<p>Até a próxima! :)</p>
